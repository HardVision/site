<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Disco Rígido</title>
    <!-- Link para o arquivo CSS externo -->
    <link rel="stylesheet" href="style.css">
    <!-- Importação da biblioteca Chart.js para criação de gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Container principal da aplicação -->
    <div class="container">
        <!-- Barra lateral de navegação -->
        <aside class="sidebar">
            <!-- Seção de perfil do usuário -->
            <div class="profile">
                <!-- Imagem de perfil do usuário -->
                <img src="https://via.placeholder.com/80" alt="Foto de perfil" class="profile-pic">
                <!-- Nome do usuário -->
                <h3>JuliaVisconti</h3>
                <!-- Cargo/função do usuário -->
                <p>Analista de TI</p>
            </div>
            
            <!-- Menu de navegação lateral -->
            <nav class="nav-menu">
                <!-- Botão para página de Métricas -->
                <button class="nav-btn">Métricas</button>
                <!-- Botão para página de Perfil -->
                <button class="nav-btn">Perfil</button>
                <!-- Botão para página de Alertas -->
                <button class="nav-btn">Alertas</button>
                <!-- Botão para página de Relatórios -->
                <button class="nav-btn">Relatórios</button>
            </nav>
            
            <!-- Botão de sair fixado na parte inferior da sidebar -->
            <button class="nav-btn exit-btn">Sair</button>
        </aside>

        <!-- Área de conteúdo principal -->
        <main class="main-content">
            <!-- Cabeçalho com título e botões de seleção -->
            <header class="header">
                <!-- Título principal da página -->
                <h1>Disco Rígido</h1>
                <!-- Container dos botões dropdown -->
                <div class="header-buttons">
                    <!-- Dropdown para seleção de máquina -->
                    <div class="dropdown">
                        <button class="dropdown-btn">Máquina 1</button>
                        <!-- Menu dropdown com opções de máquinas -->
                        <div class="dropdown-content">
                            <a href="#" data-machine="1">Máquina 1</a>
                            <a href="#" data-machine="2">Máquina 2</a>
                            <a href="#" data-machine="3">Máquina 3</a>
                            <a href="#" data-machine="4">Máquina 4</a>
                        </div>
                    </div>
                    
                    <!-- Dropdown para seleção de componente -->
                    <div class="dropdown">
                        <button class="dropdown-btn">Disco Rígido</button>
                        <!-- Menu dropdown com opções de componentes -->
                        <div class="dropdown-content">
                            <a href="#" data-component="visao-geral">Visão Geral</a>
                            <a href="#" data-component="cpu">CPU</a>
                            <a href="#" data-component="disco">Disco</a>
                            <a href="#" data-component="ram">RAM</a>
                            <a href="#" data-component="rede">Rede</a>
                            <a href="#" data-component="auditoria">Auditoria</a>
                            <a href="#" data-component="alertas">Alertas</a>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Grid de cards informativos -->
            <div class="info-cards">
                <!-- Card de saúde atual do sistema -->
                <div class="card">
                    <p class="card-label">Saúde atual</p>
                    <p class="card-value healthy">Saudável</p>
                </div>
                
                <!-- Card de quantidade de espaço disponível -->
                <div class="card">
                    <p class="card-label">Quantidade de espaço disponível</p>
                    <p class="card-value">10Gb</p>
                </div>
                
                <!-- Card de vida útil estimada -->
                <div class="card">
                    <p class="card-label">Vida útil Estimada</p>
                    <p class="card-value warning">78 dias</p>
                </div>
            </div>

            <!-- Grid de gráficos -->
            <div class="charts-grid">
                <!-- Card com gráfico de pizza (capacidade atual) -->
                <div class="chart-card">
                    <h3 class="chart-title">Capacidade atual</h3>
                    <!-- Canvas para o gráfico de pizza -->
                    <canvas id="pieChart"></canvas>
                </div>

                <!-- Card com gráfico de barras (alertas) -->
                <div class="chart-card">
                    <h3 class="chart-title">Alertas nos últimos meses</h3>
                    <!-- Canvas para o gráfico de barras -->
                    <canvas id="barChart"></canvas>
                </div>

                <!-- Card com gráfico de linha (uso ao longo do tempo) -->
                <div class="chart-card large">
                    <h3 class="chart-title">Uso nos últimos meses</h3>
                    <!-- Canvas para o gráfico de linha -->
                    <canvas id="lineChart"></canvas>
                </div>
            </div>
        </main>
    </div>

    <!-- Script JavaScript para inicialização dos gráficos -->
    <script>
        // Configuração e criação do gráfico de pizza (Capacidade atual)
        const pieCtx = document.getElementById('pieChart').getContext('2d');
        const pieChart = new Chart(pieCtx, {
            type: 'pie', // Tipo de gráfico: pizza
            data: {
                labels: ['Espaço disponível', 'Espaço utilizado'], // Legendas
                datasets: [{
                    data: [28.6, 71.4], // Dados em percentual (preparado para dados reais)
                    backgroundColor: ['#2ECC71', '#3498DB'], // Cores das fatias
                    borderWidth: 0 // Sem borda entre as fatias
                }]
            },
            options: {
                responsive: true, // Gráfico responsivo
                maintainAspectRatio: true, // Mantém proporção
                plugins: {
                    legend: {
                        position: 'right', // Legenda à direita
                        labels: {
                            font: {
                                size: 11 // Tamanho da fonte da legenda
                            },
                            generateLabels: function(chart) {
                                // Customização das labels com percentuais
                                const data = chart.data;
                                return data.labels.map((label, i) => {
                                    const value = data.datasets[0].data[i];
                                    return {
                                        text: `${label}\n${value}%`, // Texto com percentual
                                        fillStyle: data.datasets[0].backgroundColor[i]
                                    };
                                });
                            }
                        }
                    }
                }
            }
        });

        // Configuração e criação do gráfico de barras (Alertas nos últimos meses)
        const barCtx = document.getElementById('barChart').getContext('2d');
        const barChart = new Chart(barCtx, {
            type: 'bar', // Tipo de gráfico: barras
            data: {
                labels: ['Item 1', 'Item 2', 'Item 3', 'Item 4'], // Labels (preparado para dados reais)
                datasets: [{
                    data: [8, 12, 16, 19], // Valores das barras (preparado para dados reais)
                    backgroundColor: '#FFB3BA', // Cor das barras
                    borderRadius: 4 // Bordas arredondadas
                }]
            },
            options: {
                responsive: true, // Gráfico responsivo
                maintainAspectRatio: true, // Mantém proporção
                plugins: {
                    legend: {
                        display: false // Esconde a legenda
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true, // Eixo Y começa do zero
                        max: 20, // Valor máximo do eixo Y
                        ticks: {
                            stepSize: 5 // Intervalo entre os valores
                        }
                    },
                    x: {
                        grid: {
                            display: false // Remove linhas de grade do eixo X
                        }
                    }
                }
            }
        });

        // Configuração e criação do gráfico de linha (Uso nos últimos meses)
        const lineCtx = document.getElementById('lineChart').getContext('2d');
        const lineChart = new Chart(lineCtx, {
            type: 'line', // Tipo de gráfico: linha
            data: {
                labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio'], // Meses (preparado para dados reais)
                datasets: [{
                    data: [18, 27, 25, 37, 38], // Valores de uso (preparado para dados reais)
                    borderColor: '#5B6B8D', // Cor da linha
                    backgroundColor: 'transparent', // Sem preenchimento abaixo da linha
                    tension: 0.3, // Curvatura da linha
                    pointRadius: 4, // Tamanho dos pontos
                    pointBackgroundColor: '#5B6B8D' // Cor dos pontos
                }]
            },
            options: {
                responsive: true, // Gráfico responsivo
                maintainAspectRatio: true, // Mantém proporção
                plugins: {
                    legend: {
                        display: false // Esconde a legenda
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true, // Eixo Y começa do zero
                        max: 40, // Valor máximo do eixo Y
                        ticks: {
                            stepSize: 10 // Intervalo entre os valores
                        }
                    },
                    x: {
                        grid: {
                            display: false // Remove linhas de grade do eixo X
                        }
                    }
                }
            }
        });

        // Funcionalidade dos dropdowns
        // Seleciona todos os botões dropdown
        const dropdownBtns = document.querySelectorAll('.dropdown-btn');
        dropdownBtns.forEach(btn => {
            // Adiciona evento de clique para abrir/fechar dropdown
            btn.addEventListener('click', function(e) {
                e.stopPropagation(); // Previne propagação do evento
                const dropdown = this.parentElement;
                dropdown.classList.toggle('active'); // Toggle da classe active
            });
        });

        // Fecha dropdowns ao clicar fora deles
        document.addEventListener('click', function() {
            document.querySelectorAll('.dropdown').forEach(dropdown => {
                dropdown.classList.remove('active'); // Remove classe active
            });
        });

        // Funcionalidade de seleção nos dropdowns
        document.querySelectorAll('.dropdown-content a').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault(); // Previne comportamento padrão do link
                const dropdown = this.closest('.dropdown');
                const btn = dropdown.querySelector('.dropdown-btn');
                btn.textContent = this.textContent; // Atualiza texto do botão
                dropdown.classList.remove('active'); // Fecha o dropdown
                
                // Aqui você pode adicionar lógica para atualizar os dados
                // com base na seleção (preparado para integração com backend)
                const machine = this.getAttribute('data-machine');
                const component = this.getAttribute('data-component');
                
                if (machine) {
                    console.log('Máquina selecionada:', machine);
                    // updateDashboardData(machine, component);
                }
                if (component) {
                    console.log('Componente selecionado:', component);
                    // updateDashboardData(machine, component);
                }
            });
        });

        // Função preparada para atualizar dados da dashboard (integração futura)
        // function updateDashboardData(machine, component) {
        //     // Aqui você fará a chamada ao backend
        //     // fetch(`/api/dashboard?machine=${machine}&component=${component}`)
        //     //     .then(response => response.json())
        //     //     .then(data => {
        //     //         // Atualizar os gráficos com os novos dados
        //     //         pieChart.data.datasets[0].data = data.pieData;
        //     //         pieChart.update();
        //     //         
        //     //         barChart.data.datasets[0].data = data.barData;
        //     //         barChart.update();
        //     //         
        //     //         lineChart.data.datasets[0].data = data.lineData;
        //     //         lineChart.update();
        //     //     });
        // }
    </script>
</body>
</html>